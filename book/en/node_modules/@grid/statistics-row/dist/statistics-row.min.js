!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var o={inherits:function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.base=function(t,i,o){i||(i="constructor");for(var n=arguments.length,r=new Array(n),s=2;s<n;s++)r[s-2]=arguments[s];return e.prototype[i].apply(t,r)}}},n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var i=this._events[t];i?i.indexOf(e)<0&&(i.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},n.prototype.removeEventListener=function(t,e){var i=this._events?this._events[t]:null;if(i){var o=i.indexOf(e);o>=0&&(i.splice(o,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},n.prototype.getListener=function(t,e){if(t){var i=this._events?this._events[t]:null;if(i)return e||(e=0),i[e]||null}return null},n.prototype.addListener=function(t,e){var i=t?t[e]:null;"function"==typeof i&&this.addEventListener(e,i)},n.prototype._prepareEventArguments=function(t,e){return e},n.prototype._dispatch=function(t,e){var i=this._events?this._events[t]:null;if(i){e=this._prepareEventArguments(t,e);for(var o=i.length,n=0;n<o;++n)i[n](e)}};n.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var r=function(t,e,i){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=i&&(this._ctx=i),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};r.prototype.promise=null,r.prototype._resolve=null,r.prototype._reject=null,r.prototype._resolveHandler=null,r.prototype._rejectHandler=null,r.prototype._ctx=null,r.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},r.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},r.prototype._finally=function(){this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var s=function(){};o.inherits(s,n),s.prototype._hosts=null,s.prototype._compositeGrid=null,s.prototype._realTimeGrid=null,s.prototype._rowGetter=null,s.prototype._initializedGrid=!1,s.prototype.listen=s.prototype.addEventListener,s.prototype.unlisten=s.prototype.removeEventListener,s.prototype.afterInit=function(t,e,i){var o=null;i&&i.getCoreGrid&&(o=i.getCoreGrid()),o&&(this.getGridApi()||this.setGridWrapper("compositegrid",i),this._compositeGrid&&o.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?l:a,this._afterInit())},s.prototype._afterInit=function(){},s.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},s.prototype.hasMultiTableSupport=function(){return!1},s.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},s.prototype.getName=function(){return"GridPlugin"},s.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var i=(e=t.target).api;if(i&&i.getCoreGrid)return i.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var o=this._hosts.length;--o>=0;){var n=this._hosts[o];if(n.getElement().contains(e))return n}return null},s.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},s.prototype.getGridApi=function(){return this._compositeGrid||this._realTimeGrid||null},s.prototype.getColumnName=function(t){if(this._compositeGrid){var e="string"==typeof t?t:this._compositeGrid.getColumnId(t),i=this._compositeGrid.getColumnModel(e);if(i)return i.title?i.title:i.field}else{var o=this.getColumnIndex(t),n=this._realTimeGrid.getColumnDefinition(o);if(n)return n.getName()}return""},s.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnIndex(t);for(var e=this._realTimeGrid,i=e.getColumnCount(),o=0;o<i;++o){var n=e.getColumnDefinition(o);if(n&&n.getId()===t)return o}return-1},s.prototype.getColumnId=function(t){if("string"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var e=this._realTimeGrid.getColumnDefinition(t);return e?e.getId():""},s.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},s.prototype._loadPlugin=function(t,e,i){return t||(t=e.getPlugin(i))||(t=e.loadPlugin(i))&&this._initializedGrid&&(t._initializedGrid=!0),t},s.prototype._requestPlugin=function(t,e,i){return this._initializedGrid?s.requestPlugin(t,e,i,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},s.requestPlugin=function(t,e,i,o,n){var a=null;if(t){var l=null;1===t.nodeType?l=t.api:t.getCoreGrid?l=t:t.getPlugin&&(a=t),l&&(a=l.getCoreGrid(),o||n||(l.getModel?o=l:n=l))}if(!a)return Promise.reject("Cannot find grid element");var u=a.getPlugin(e);if(u)return Promise.resolve(u);var h=new r;return setTimeout(s._onPluginRequested.bind(null,{grid:a,pluginRef:e,compositeGrid:o,realTimeGrid:n,config:i,deferred:h}),10),h.promise},s._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var i=e.getPlugin(t.pluginRef);if(i)return t.deferred.resolve(i);var o=!1;return t.pluginRef.beforeInit&&(o=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(i=e.loadPlugin(t.pluginRef,t.config))?(!o&&i.beforeInit&&(o=!0,i.beforeInit(e.getElement(),t.config)),i.setGridWrapper&&(t.compositeGrid?i.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&i.setGridWrapper("realtimegrid",t.realTimeGrid)),i.afterInit&&i.afterInit(),t.deferred.resolve(i)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},s.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},s.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},s.prototype._getColumnOption=function(t,e,i){var o=this._getColumnData(t,i);return o?o[e]:null},s.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var i=e.getColumnData(t);return i||(i=e.setColumnData(t,{})),i},s.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},s.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},s.prototype._getRow=function(t,e){return u(t.getRowDataAt(e))},s.prototype._getData=function(t,e,i){var o=this._getRow(t,e);return o?o[i]:void 0},s.prototype._setData=function(t,e,i,o){if(this._realTimeGrid){var n=t.getRowDataAt(e);n&&n.ROW_DEF.setData(i,o)}else t.setDataAt(e,i,o)},s.prototype._setRowData=function(t,e,i){if(this._realTimeGrid){var o=t.getRowDataAt(e);o&&o.ROW_DEF.setRowData(i)}else t.setRowDataAt(e,i)},s.prototype._setColumnData=function(t,e,i,o){if(o=o||t.getAllRowIds()||[],this._realTimeGrid){for(var n=t.getDataSource(),r=n.freeze(),s=i.length<o.length?i.length:o.length,a=0;a<s;++a){var l=t.getRowData(o[a]);l&&l.ROW_DEF.setData(e,i[a])}n.freeze(r)}else t.setColumnData(e,i,o)};var a=function(t){return t},l=function(t){return t?t.ROW_DEF.getRowData():null},u=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},h=function(t){this._onPostDataSourceChanged=this._onPostDataSourceChanged.bind(this),this._onPostSectionDataBinding=this._onPostSectionDataBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onExtensionLoaded=this._onExtensionLoaded.bind(this),this._onDataChanged=this._onDataChanged.bind(this),this._onRowRemoved=this._onRowRemoved.bind(this),this._hosts=[],this._headerRows=[],this._footerRows=[],this._rows=[],t&&this.config({statisticsRow:t})};o.inherits(h,s),h._aliases={average:"average",avg:"average",mean:"average",count:"count",max:"max",maximum:"max",min:"min",minimum:"min",sum:"sum",summation:"sum"},h._defaultLabels={average:"Average",count:"Count",max:"Maximum",min:"Minimum",sum:"Summation"},h.prototype._invalidText="",h.prototype._noColoring=!1,h.prototype._noFormatting=!1,h.prototype._headerRows=null,h.prototype._footerRows=null,h.prototype._rows=null,h.prototype._headerSect=null,h.prototype._footerSect=null,h.prototype._tfExt=null,h.prototype._ccExt=null,h.prototype._disabledUIs=!1,h.prototype.getName=function(){return"StatisticsRowPlugin"},h.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),setTimeout(this._onExtensionLoaded,0),this._disabledUIs=!0,this.config(e),this._disabledUIs=!1,t.getDataSource().listen("dataChanged",this._onDataChanged),t.listen("rowRemoved",this._onRowRemoved),t.listen("postDataSourceChanged",this._onPostDataSourceChanged),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("columnAdded",this._onColumnAdded),t.getSection("title")&&this._onPostDataSourceChanged())},h.prototype._onExtensionLoaded=function(){if(!this._tfExt||!this._ccExt){var t=this._hosts[0];t&&(this._tfExt=t.getPlugin("TextFormattingPlugin"),this._ccExt=t.getPlugin("ConditionalColoringPlugin"))}},h.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.getDataSource().unlisten("dataChanged",this._onDataChanged),t.unlisten("rowRemoved",this._onRowRemoved),t.unlisten("postDataSourceChanged",this._onPostDataSourceChanged),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("columnAdded",this._onColumnAdded),this._hosts.length||(this._headerSect=this._footerSect=null,this._tfExt=this._ccExt=null),this._dispose())},h.prototype.config=function(t){if(t){var e=t.statisticsRow;e&&(null!=e.invalidText&&(this._invalidText=e.invalidText),null!=e.noColoring&&(this._noColoring=!!e.noColoring),null!=e.noFormatting&&(this._noFormatting=!!e.noFormatting),this.addListener(e,"postCalculation"),this.addListener(e,"postRendering"),null!=e.rows&&this.setStatisticsRows(e.rows));for(var i=t.columns,o=i?i.length:0,n=0;n<o;++n){var r=i[n];this._configColumn(n,r)}}},h.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={});var s=this._getExtColumnConfig(n);s&&(s.label?r.statistics="label":s.statistics&&(r.statistics=!0))}var a=e.statisticsRow;return a||(a=e.statisticsRow={}),this._rows.length>0&&(a.rows=this._rows),this._invalidText&&(a.invalidText=this._invalidText),this._noColoring&&(a.noColoring=this._noColoring),this._noFormatting&&(a.noFormatting=this._noFormatting),e},h.prototype.setStatisticsRows=function(t){var e=t?t.length:0;this._headerRows.length=0,this._footerRows.length=0;for(var i=0;i<e;++i){var o=this._prepareStatRow(t[i]);"header"===o.placement?this._headerRows.push(o):this._footerRows.push(o)}this._rows=this._headerRows.concat(this._footerRows),this._prepareSections(),this._updateUIs()},h.prototype.getStatisticsRows=function(){return this._rows.slice()},h.prototype._prepareStatRow=function(t){if(!t)return null;var e=t.placement;t.placement="header"===e||"title"===e?"header":"footer";var i=t.statistic||t.statistics;if(t.statistics&&(t.statistics=null),i){var o=h._aliases[i.toLowerCase()];o&&(i=o)}return t.statistic=i||"custom",t},h.prototype._getStatRowIndex=function(t){var e=-1;if("string"==typeof t&&t)for(var i=this._rows.length,o=0;o<i;++o){var n=this._rows[o];if(n.statistic===t){e=o;break}if(n.id===t){e=o;break}}else"number"==typeof t?e=t:t&&(e=+t)!=e&&(e=-1),(e<0||e>=this._rows.length)&&(e=-1);return e},h.prototype.setStatisticsRow=function(t,e){var i=this._getStatRowIndex(t),o=this._rows[i];if(!o||o===e)return!1;var n=this._prepareStatRow(e);if(!n)return!1;n.placement=o.placement;var r="header"===n.placement?this._headerRows:this._footerRows,s=r.indexOf(o);return this._rows[i]=n,r[s]=n,this._updateUIs(),!0},h.prototype.addStatisticsRow=function(t){var e=this._prepareStatRow(t),i=this._rows.indexOf(e);!e||i>=0||("header"===e.placement?this._headerRows.push(e):this._footerRows.push(e),this._rows=this._headerRows.concat(this._footerRows),this._prepareSections(),this._updateUIs())},h.prototype.removeStatisticsRow=function(t){var e=this._getStatRowIndex(t);if(!(e<0)){var i=this._rows[e],o="header"===i.placement?this._headerRows:this._footerRows,n=o.indexOf(i);this._rows.splice(e,1),o.splice(n,1),this._prepareSections(),this._updateUIs()}},h.prototype._configColumn=function(t,e){if(e){var i=e.statistics||e.statistic;if(!i)return;var o=this._newColumnData(t),n=o.statisticsRow;n||(n=o.statisticsRow={}),"label"===i?n.label=!0:n.statistics=!0}},h.prototype._getExtColumnConfig=function(t){return this._getColumnOption(t,"statisticsRow")||null},h.prototype._onColumnAdded=function(t){t.context&&null!=t.colIndex&&this._configColumn(t.colIndex,t.context)},h.prototype._prepareSections=function(){var t=this._hosts[0];if(t&&!this._disabledUIs){var e,i,o=t.getSection("content"),n=t.getDefaultRowHeight();this._headerRows.length?((i=this._headerSect)||(e=o?o.getIndex():1,(i=this._headerSect=t.addSectionAt(e,"title","statisticsHeaderRows")).setDefaultRowHeight(n),i.enableClass("statistics-rows")),i.setRowCount(this._headerRows.length)):this._headerSect&&(t.removeSectionAt(this._headerSect.getIndex()),this._headerSect=null),this._footerRows.length?((i=this._footerSect)||(e=o?o.getIndex()+1:t.getSectionCount(),(i=this._footerSect=t.addSectionAt(e,"footer","statisticsFooterRows")).setDefaultRowHeight(n),i.enableClass("statistics-rows")),i.setRowCount(this._footerRows.length)):this._footerSect&&(t.removeSectionAt(this._footerSect.getIndex()),this._footerSect=null)}},h.prototype._updateUIs=function(){var t=this._hosts[0];t&&!this._disabledUIs&&(t.getRowCount()>0?t.requestRowRefresh():this._onPostSectionDataBinding())},h.prototype._onPostDataSourceChanged=function(t){this._prepareSections()},h.prototype._onDataChanged=function(t){this._updateUIs()},h.prototype._onRowRemoved=function(t){t.rowCount||"content"===t.sectionType&&this._onPostSectionDataBinding()},h.prototype._onPostSectionDataBinding=function(t){if((this._headerSect||this._footerSect)&&(!t||!t.positionChangeOnly)){var e=this._hosts[0],i=e.getColumnCount(),o=e.getDataSource(),n=o.getDataSource(),r=n.getAllRowData(),s=r.length,a=null;if(this._compositeGrid?a=this._compositeGrid.getColumnFields():this._realTimeGrid&&(a=this._realTimeGrid.getColumnFields(),r=r.map(this._rowGetter)),a){var l,u=new Array(i);for(l=0;l<i;++l){u[l]=null;var h=this._getExtColumnConfig(l);if(h){var p,d,c=a[l],_=0,f=null;if(h.statistics){f=u[l]={};var g=0,m=NaN,v=NaN;for(p=0;p<s;++p)null!=(d=r[p][c])&&("number"!=typeof d&&(d=+d),d==d&&(++_,d>=m||(m=d),d<=v||(v=d),g+=d));f.field=c,f.count=_,f.sum=_>0?g:NaN,f.average=g/_,f.min=m,f.max=v}else if(h.label){for(f=u[l]={label:!0},p=0;p<s;++p)((d=r[p][c])||0===d)&&++_;f.field=c,f.count=_}}}for(this.hasListener("postCalculation")&&this._dispatch("postCalculation",{colCount:i,fields:a,statistics:u,dataRows:r,dataView:o,dataTable:n,core:e,extension:this}),l=0;l<i;++l)this._renderStatistics(l,u[l]);this.hasListener("postRendering")&&this._dispatch("postRendering",{colCount:i,fields:a,statistics:u,headerSection:this._headerSect,footerSection:this._footerSect,headerRows:this._headerRows,footerRows:this._footerRows,core:e,extension:this})}}},h.prototype._renderStatistics=function(t,e){if((this._headerSect||this._footerSect)&&e){var i,o;if(this._headerSect)for(o=this._headerSect.getRowCount(),i=0;i<o;++i)this._headerRows[i].cell=this._headerSect.getCell(t,i);if(this._footerSect)for(o=this._footerSect.getRowCount(),i=0;i<o;++i)this._footerRows[i].cell=this._footerSect.getCell(t,i);var n=this._rows;for(o=n.length,i=0;i<o;++i){var r=n[i],s=null,a=r.statistic;if(e.label)null==(s=r.label)&&(s=h._defaultLabels[a]||a);else if((s=e[a])||0===s){var l=s;if(this._tfExt&&!this._noFormatting&&(s=this._tfExt.formatText(t,l)),this._ccExt&&!this._noColoring){var u={};u[e.field]=l,this._ccExt.applyColor(t,r.cell,u)}}else s=this._invalidText;r.cell.setContent(s),r.cell=null}}};!function(t,e){if(t&&e&&e.prototype.getName){var i=e.prototype.getName().replace(/Plugin$/,"");if(i){var o=t.tr;o||(o=t.tr={});var n=o.grid;n||(n=o.grid={}),n[i+"Plugin"]=e,o[i+"Extension"]=e}}}(window,h)}]);