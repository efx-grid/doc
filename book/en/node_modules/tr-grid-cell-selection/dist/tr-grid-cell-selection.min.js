!function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return cloneObject})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isIE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return prepareTSVContent}));var Util={post:function(t,e){return Util._post(t,e).then(Util.toJSON)},requestText:function(t,e){return Util._post(t,e,"text/plain").then(Util.toText)},requestByUrlEncoded:function(t,e){return Util._post(t,e,"application/x-www-form-urlencoded").then(Util.toJSON)},toJSON:function(t){return Util._logError(t)?Promise.reject(t):t.json()},toText:function(t){return Util._logError(t)?Promise.reject(t):t.text()},_logError:function(t){return!!(t&&t.status>=300)&&(console.log("Response "+t.status+": "+t.statusText),!0)},_post:function(t,e,o){var i={method:e?"POST":"GET",headers:{"Content-Type":o||"application/json"}};return e&&(i.body="string"==typeof e?e:JSON.stringify(e)),fetch(t,i)}},extendObject=function(t,e,o){if(!t)return null;if(!e||t===e)return t;var i;if(o)for(var n=o.length,r=0;r<n;++r)(i=o[r])&&extendProperty(t,e,i);else for(i in e)extendProperty(t,e,i);return t},cloneObject=function(t,e){return extendObject({},t,e)},arrayToObject=function(t,e){if(!Array.isArray(t))return t;if(!e)return null;var o=t;t={};for(var i=o.length,n=0;n<i;++n){var r=e[n];r&&void 0!==o[n]&&(t[r]=o[n])}return t},extendProperty=function(t,e,o){var i=e[o];if(null!=i){var n=t[o];Array.isArray(n)?t[o]=n.concat(i):Array.isArray(i)&&n?t[o]=i.concat(n):t[o]=i}},extendArrayProperty=function(t,e,o){var i=null;if(o){var n=t[e];i=n?Array.isArray(n)?n:t[e]=[n]:t[e]=[],Array.isArray(o)?o.length&&(o.length>1?Array.prototype.push.apply(i,o):i.push(o[0])):i.push(o)}return i},_bracketExp=new RegExp(/\[[^\[]*\]/g),parseCondition=function(expression){if(!expression)return null;if("string"!=typeof expression)return"function"==typeof expression?expression:null;for(var brackets=expression.match(_bracketExp),map={},fields=[],len=brackets?brackets.length:0,i=len;--i>=0;){var field=brackets[i];map[field]||(map[field]="f["+fields.length+"]",fields.push(field.substring(1,field.length-1)))}expression=expression.replace(_bracketExp,(function(t){return"rowData["+map[t]+"]"}));var finalExp="(function(f, rowData) { return ("+expression+"); })",fn=null;try{fn=eval(finalExp),fn=fn.bind(null,fields)}catch(t){console.log(t.message)}return fn||null},_encloseBracket=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},_indentBracketContent=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},prettifyCss=function(t){if(t){var e="";if(Array.isArray(t))e=t.map(_encloseBracket).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,_indentBracketContent)}return""},getShadowRoot=function(t){var e;if(t&&(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t))return e;return null},injectCss=function(t,e){if(!t)return null;var o=document.createElement("style");o.textContent="\n"+t+"\n";var i,n=getShadowRoot(e),r=!0;return n||(r=!1,n=document.head),r&&n.children&&n.children.length&&(i=n.children[0]),i?n.insertBefore(o,i):n.appendChild(o),o},isIE=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0},isMac=function(){return/Mac/.test(navigator.platform)},isTouchDevice=function(){return!!(navigator.maxTouchPoints&&navigator.maxTouchPoints<256||navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints<256)},nestedObjectToArray=function(t,e){for(var o in e||(e=[]),t){var i=t[o];"object"==typeof i?nestedObjectToArray(i,e):e.push(i)}return e},rgb2Hex=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;var e=t.match(/\d+/g);if(!e||e.length<3)return t;for(var o="#",i=0;i<3;i++){var n=+e[i];n>=16||(o+="0"),o+=n?n.toString(16).toUpperCase():"0"}return o},prepareTSVContent=function(t){if(null==t)return"";var e="string"==typeof t?t:t.toString();return e.length?(e.indexOf("\n")>=0&&(e=e.replace(/[\r\n]/g," ")),e.indexOf("\t")>=0&&(e=e.replace(/\t/g," "))," "!==e.charAt(0)&&" "!==e.charAt(e.length-1)||(e=e.trim()),e):""},_unused_webpack_default_export=Util},function(t,e,o){"use strict";o.r(e);var i={inherits:function(t,e){function o(){}o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t,t.base=function(t,o,i){o||(o="constructor");for(var n=arguments.length,r=new Array(n),s=2;s<n;s++)r[s-2]=arguments[s];return e.prototype[o].apply(t,r)}}},n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var o=this._events[t];o?o.indexOf(e)<0&&(o.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},n.prototype.removeEventListener=function(t,e){var o=this._events?this._events[t]:null;if(o){var i=o.indexOf(e);i>=0&&(o.splice(i,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},n.prototype.getListener=function(t,e){if(t){var o=this._events?this._events[t]:null;if(o)return e||(e=0),o[e]||null}return null},n.prototype.addListener=function(t,e){var o=t?t[e]:null;"function"==typeof o&&this.addEventListener(e,o)},n.prototype._prepareEventArguments=function(t,e){return e},n.prototype._dispatch=function(t,e){var o=this._events?this._events[t]:null;if(o){e=this._prepareEventArguments(t,e);for(var i=o.length,n=0;n<i;++n)o[n](e)}};n.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var r=function(t,e,o){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=o&&(this._ctx=o),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};r.prototype.promise=null,r.prototype._resolve=null,r.prototype._reject=null,r.prototype._resolveHandler=null,r.prototype._rejectHandler=null,r.prototype._ctx=null,r.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},r.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},r.prototype._finally=function(){this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var s=function(){};i.inherits(s,n),s.prototype._hosts=null,s.prototype._compositeGrid=null,s.prototype._realTimeGrid=null,s.prototype._rowGetter=null,s.prototype._initializedGrid=!1,s.prototype.listen=s.prototype.addEventListener,s.prototype.unlisten=s.prototype.removeEventListener,s.prototype.afterInit=function(t,e,o){var i=null;o&&o.getCoreGrid&&(i=o.getCoreGrid()),i&&(this.getGridApi()||this.setGridWrapper("compositegrid",o),this._compositeGrid&&i.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?h:l,this._afterInit())},s.prototype._afterInit=function(){},s.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},s.prototype.hasMultiTableSupport=function(){return!1},s.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},s.prototype.getName=function(){return"GridPlugin"},s.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var o=(e=t.target).api;if(o&&o.getCoreGrid)return o.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var i=this._hosts.length;--i>=0;){var n=this._hosts[i];if(n.getElement().contains(e))return n}return null},s.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},s.prototype.getGridApi=function(){return this._compositeGrid||this._realTimeGrid||null},s.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var o=this.getColumnIndex(t),i=this._realTimeGrid.getColumnDefinition(o);if(i)return i.getName()}return""},s.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnIndex(t);for(var e=this._realTimeGrid,o=e.getColumnCount(),i=0;i<o;++i){var n=e.getColumnDefinition(i);if(n&&n.getId()===t)return i}return-1},s.prototype.getColumnId=function(t){if("string"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var e=this._realTimeGrid.getColumnDefinition(t);return e?e.getId():""},s.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},s.prototype._loadPlugin=function(t,e,o){return t||(t=e.getPlugin(o))||(t=e.loadPlugin(o))&&this._initializedGrid&&(t._initializedGrid=!0),t},s.prototype._requestPlugin=function(t,e,o){return this._initializedGrid?s.requestPlugin(t,e,o,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},s.requestPlugin=function(t,e,o,i,n){var l=null;if(t){var h=null;1===t.nodeType?h=t.api:t.getCoreGrid?h=t:t.getPlugin&&(l=t),h&&(l=h.getCoreGrid(),i||n||(h.getModel?i=h:n=h))}if(!l)return Promise.reject("Cannot find grid element");var u=l.getPlugin(e);if(u)return Promise.resolve(u);var c=new r;return setTimeout(s._onPluginRequested.bind(null,{grid:l,pluginRef:e,compositeGrid:i,realTimeGrid:n,config:o,deferred:c}),10),c.promise},s._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var o=e.getPlugin(t.pluginRef);if(o)return t.deferred.resolve(o);var i=!1;return t.pluginRef.beforeInit&&(i=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(o=e.loadPlugin(t.pluginRef,t.config))?(!i&&o.beforeInit&&(i=!0,o.beforeInit(e.getElement(),t.config)),o.setGridWrapper&&(t.compositeGrid?o.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&o.setGridWrapper("realtimegrid",t.realTimeGrid)),o.afterInit&&o.afterInit(),t.deferred.resolve(o)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},s.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},s.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},s.prototype._getColumnOption=function(t,e,o){var i=this._getColumnData(t,o);return i?i[e]:null},s.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var o=e.getColumnData(t);return o||(o=e.setColumnData(t,{})),o},s.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},s.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},s.prototype._getRow=function(t,e){return u(t.getRowDataAt(e))},s.prototype._getData=function(t,e,o){var i=this._getRow(t,e);return i?i[o]:void 0},s.prototype._setData=function(t,e,o,i){if(this._realTimeGrid){var n=t.getRowDataAt(e);n&&n.ROW_DEF.setData(o,i)}else t.setDataAt(e,o,i)},s.prototype._setRowData=function(t,e,o){if(this._realTimeGrid){var i=t.getRowDataAt(e);i&&i.ROW_DEF.setRowData(o)}else t.setRowDataAt(e,o)},s.prototype._setColumnData=function(t,e,o,i){if(i=i||t.getAllRowIds()||[],this._realTimeGrid){for(var n=t.getDataSource(),r=n.freeze(),s=o.length<i.length?o.length:i.length,l=0;l<s;++l){var h=t.getRowData(i[l]);h&&h.ROW_DEF.setData(e,o[l])}n.freeze(r)}else t.setColumnData(e,o,i)};var l=function(t){return t},h=function(t){return t?t.ROW_DEF.getRowData():null},u=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},c=function(t,e){this._onTouchStart=this._dispatch.bind(this,"touchStart"),this._onTouchEnd=this._dispatch.bind(this,"touchEnd"),this._onTouchMove=this._dispatch.bind(this,"touchMove"),e&&("boolean"==typeof e?this._touchMove=!0:(e.useTouchMove&&(this._touchMove=!0),e.preventDefault&&(this._defaultPrevented=!0))),this._defaultPrevented||(this._evtOptions=c.passive),this.setElement(t)};i.inherits(c,n),c.prototype._elem,c.prototype._onTouchStart,c.prototype._onTouchEnd,c.prototype._onTouchMove,c.prototype._touchMove=!1,c.prototype._defaultPrevented=!1,c.prototype._evtOptions,c.passive={passive:!0},c.prototype.getElement=function(){return this._elem},c.prototype.setElement=function(t){this.detachTouchEvents(),this._elem=t||null,this.attachTouchEvents(this._touchMove)},c.prototype.applyTrait=c.prototype.setElement,c.prototype.dispose=function(){this.setElement(null)},c.prototype.addTouchListeners=function(t,e,o){t&&this.addEventListener("touchStart",t),e&&this.addEventListener("touchEnd",e),o&&this.addEventListener("touchMove",o)},c.prototype.removeTouchListeners=c.prototype.unlistenAll,c.prototype.attachTouchMoveEvent=function(){var t=this._elem;t&&(this._defaultPrevented&&t.addEventListener("touchmove",n.preventDefault),t.addEventListener("touchmove",this._onTouchMove,this._evtOptions))},c.prototype.detachTouchMoveEvent=function(){var t=this._elem;t&&(this._defaultPrevented&&t.removeEventListener("touchmove",n.preventDefault),t.removeEventListener("touchmove",this._onTouchMove,this._evtOptions))},c.prototype.attachTouchEvents=function(t){var e=this._elem;e&&(e.addEventListener("touchstart",this._onTouchStart,this._evtOptions),e.addEventListener("touchend",this._onTouchEnd,this._evtOptions),e.addEventListener("touchcancel",this._onTouchEnd,this._evtOptions),t&&this.attachTouchMoveEvent())},c.prototype.detachTouchEvents=function(){var t=this._elem;t&&(t.removeEventListener("touchstart",this._onTouchStart,this._evtOptions),t.removeEventListener("touchend",this._onTouchEnd,this._evtOptions),t.removeEventListener("touchcancel",this._onTouchEnd,this._evtOptions),this.detachTouchMoveEvent())},c.getButtonType=function(t){return t.changedTouches?0:t.button||0},c.getPosition=function(t,e){var o=t.changedTouches,i=o?o[o.length-1]:t;return e||(e={}),e.x=e.pageX=i.pageX,e.y=e.pageY=i.pageY,e.clientX=i.clientX,e.clientY=i.clientY,e.timeStamp=t.timeStamp,e};var a=function(t,e){var o;if(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseMove=this._dispatch.bind(this,"mouseMove"),e)if("string"==typeof e){var i=e.charAt(0).toLowerCase();"m"===i?this._whichBtn=1:"r"===i&&(this._whichBtn=2)}else o=e,e.useDragStart&&(this._useDrag=!0);this._tchProxy=new c(null,o),this._tchProxy.addTouchListeners(this._onMouseDown,this._onMouseUp,this._onMouseMove),this.setElement(t)};i.inherits(a,n),a.prototype._tchProxy,a.prototype._down=null,a.prototype._whichBtn=0,a.prototype._useDrag=!1,a.prototype._disabled=!1,a.prototype._onMouseMove,a.prototype.dispose=function(){this.unlistenAll(),this._tchProxy.dispose(),window.removeEventListener("mouseup",this._onMouseUp,!1)},a.prototype.disable=function(t){this._disabled=!1!==t,this._disabled||this.reset()},a.prototype.enable=function(t){this.disable(!1===t)},a.prototype.getElement=function(){return this._tchProxy.getElement()},a.prototype.setElement=function(t){var e=this._tchProxy.getElement();e&&(e.removeEventListener("dragstart",n.preventDefault,!1),this._useDrag?(e.removeEventListener("dragstart",this._onMouseDown,!1),e.removeAttribute("draggable")):e.removeEventListener("mousedown",this._onMouseDown,!1)),this._tchProxy.setElement(t),(e=this._tchProxy.getElement())&&(e.addEventListener("dragstart",n.preventDefault,!1),this._useDrag?(e.addEventListener("dragstart",this._onMouseDown,!1),e.setAttribute("draggable","true")):e.addEventListener("mousedown",this._onMouseDown,!1))},a.prototype.reset=function(){this._down=null},a.prototype.getMouseDown=function(){return this._down},a.prototype.isMouseDown=function(){return!!this._down},a.prototype.isMouseUp=function(){return!this._down},a.prototype.getDuration=function(t){return this._down?(t?t.getTime():Date.now())-this._down.timeStamp:0},a.prototype._onMouseDown=function(t){this._disabled||this._isValidButton(t)&&(window.addEventListener("mouseup",this._onMouseUp,!1),this.hasListener("mouseMove")&&(window.addEventListener("mousemove",this._onMouseMove,!1),this._tchProxy.attachTouchMoveEvent()),this._down||(this._down=c.getPosition(t),this._dispatch("change",t)),this._dispatch("mouseDown",t))},a.prototype._onMouseUp=function(t){this._disabled||this._isValidButton(t)&&(window.removeEventListener("mousemove",this._onMouseMove,!1),window.removeEventListener("mouseup",this._onMouseUp,!1),this.hasListener("mouseMove")&&this._tchProxy.detachTouchMoveEvent(),this._down&&(t.duration=t.timeStamp-this._down.timeStamp,t.up=!0,this._dispatch("change",t)),this._down=null,this._dispatch("mouseUp",t))},a.prototype._isValidButton=function(t){return c.getButtonType(t)===this._whichBtn};var p=o(0),_=function(t){t&&t.enableClass("selection",!0)},d=function(t){t&&t.enableClass("selection",!1)},f=function(t){this._textRange=document.createRange(),this._isIE=Object(p.b)(),this._unselectables={title:!0,header:!0,content:!1},this._hosts=[],this._map=[],this._curRect={},this._curRect.left=0,this._curRect.right=0,this._curRect.top=0,this._curRect.bottom=0,this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onBlur=this._onBlur.bind(this),this._onCopy=this._onCopy.bind(this),this._onTab=this._onTab.bind(this),this._onPostSectionDataBinding=this._onPostSectionDataBinding.bind(this),this._onColumnMoved=this._onColumnMoved.bind(this),t&&this.config({cellSelection:t})};i.inherits(f,s),f.prototype._textRange=null,f.prototype._anchor=null,f.prototype._curMouse=null,f.prototype._curRect,f.prototype._map,f.prototype._hasCellSpan=!1,f.prototype._mode="cell",f.prototype._unselectables,f.prototype._lastSelection=null,f.prototype._lastMouseUpTimeStamp,f.prototype._autoDeselecting=!0,f.prototype._disabled=!1,f.prototype._mouseTrait=null,f.prototype._allowMultipleSelection=!0,f.prototype._dirty=!1,f.prototype._tabToSelect=!1,f.prototype._isIE,f.prototype._unclickableMapping={A:1,INPUT:1,BUTTON:1,SELECT:1,CHECKBOX:1,"EMERALD-DATETIME-PICKER":1,"EMERALD-MULTI-SELECT":1},f.prototype._dirVectors=null,f.prototype._mouseOutOfGrid=!1,f.prototype._timeoutID=null,f.prototype._scrollSpeed=500,f.prototype._prevRect={},f.prototype._draggable=!1,f.prototype.getName=function(){return"CellSelectionPlugin"},f.prototype.hasMultiTableSupport=function(){return!0},f.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this._mouseTrait=new a(t.getElement()),this._mouseTrait.addEventListener("mouseDown",this._onMouseDown),this._mouseTrait.addEventListener("mouseUp",this._onMouseUp),this._mouseTrait.addEventListener("mouseMove",this._onMouseMove),t.getParent().addEventListener("blur",this._onBlur,!0),t.listen("focusout",this._onBlur),t.listen("copy",this._onCopy),this._tabToSelect&&t.listen("keydown",this._onTab),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("columnMoved",this._onColumnMoved),t.enableClass("no-text-select",!0),1===this._hosts.length&&this.config(e))},f.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._mouseTrait.removeEventListener("mouseDown",this._onMouseDown),this._mouseTrait.removeEventListener("mouseMove",this._onMouseMove),this._mouseTrait.removeEventListener("mouseUp",this._onMouseUp),t.unlisten("copy",this._onCopy),t.getParent().removeEventListener("blur",this._onBlur),t.unlisten("keydown",this._onTab),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("columnMoved",this._onColumnMoved),this.deselectAll(),t.enableClass("no-text-select",!1),this._hosts.splice(e,1),this._hosts.length||(this._compositeGrid=null,this._realTimeGrid=null))},f.prototype.config=function(t){if(t){var e=t.cellSelection;if(e){var o=e.mode;this._mode=o||this._mode,o=e.multipleSelection,this._allowMultipleSelection=null!=o?o:this._allowMultipleSelection,this._allowMultipleSelection||this._mouseTrait.removeEventListener("mouseMove",this._onMouseMove),o=e.autoDeselecting,this._autoDeselecting=null!=o?o:this._autoDeselecting,(o=e.selectableSections)&&this.setSelectableSections(o),(o=e.tabToSelect)&&(this._tabToSelect=!0,this._hosts[0]&&this._hosts[0].listen("keydown",this._onTab)),this.addListener(e,"selectionChanged"),this.addListener(e,"copy"),this.addListener(e,"beforeMouseDown")}}},f.prototype.getConfigObject=function(t){var e=t||{},o=e.cellSelection;o||(o=e.cellSelection={}),o.mode=this._mode,this._allowMultipleSelection||(o.multipleSelection=!1),this._autoDeselecting||(o.autoDeselecting=!1),this._tabToSelect&&(o.tabToSelect=!0);var i=this._unselectables,n=[];for(var r in i)i[r]||n.push(r);return n.length>0&&n.length<3&&(o.selectableSections=n),e},f.prototype._onMouseDown=function(t){if(this._draggable=!1,!this._disabled&&this._isClickable(t.target)){var e=this.getRelativeGrid(t),o=e.getRelativePosition(t);this._unselectables[o.sectionType]||(this._dispatch("beforeMouseDown",o),o.cancel||(this._dirty=!0,this.selectSingleCell(o),e.setAttribute("draggable","true"),this._draggable=!0))}},f.prototype._onMouseMove=function(t){if(!this._disabled&&this._anchor&&this._draggable){var e=this._getActiveGrid(),o=e.getRelativePosition(t);if(0!==o.sectionIndex){if(!o.hit){var i=e.getHeight(),n=e.getWidth();if(0===e.getScrollWidth()&&0===e.getScrollHeight())return;if(i>=o.y&&!(o.y<0)&&n>=o.x&&!(o.x<0))return;var r=0,s=0;o.x>n?r=o.x-n:o.x<0&&(r=o.x),o.y>i?s=o.y-i:o.y<0&&(s=o.y);var l={x:r,y:s};this._setScrollSpeed(l);var h=this._checkIsSameProps(l);if(this._mouseOutOfGrid&&h)return;return this._dirVectors=l,void this._setScrollInterval(l)}if(this._timeoutID&&(clearTimeout(this._timeoutID),this._mouseOutOfGrid=!1),!this._isTheSamePosition(this._curMouse,o)){this._curMouse=o,this._dirty=!0;var u=this._newSelectionRect();this._updateSelection(u)}}}},f.prototype._getActiveGrid=function(){var t=this._anchor;return t&&t.grid?t.grid:this._hosts[0]},f.prototype._setScrollSpeed=function(t){var e=Math.floor(300-Math.abs((t.x+t.y)/2));e%10==0&&(this._scrollSpeed=e>0||e<=500?e:50)},f.prototype._detectDir=function(t){var e=null;return t<0?e="minus":0===t?e="zero":t>0&&(e="positive"),e},f.prototype._checkIsSameProps=function(t){if(!this._dirVectors||!t)return!1;var e=this._detectDir(this._dirVectors.x)===this._detectDir(t.x),o=this._detectDir(this._dirVectors.y)===this._detectDir(t.y);return e&&o},f.prototype._setScrollInterval=function(t){this._timeoutID&&clearTimeout(this._timeoutID),this._mouseOutOfGrid||(this._mouseOutOfGrid=!0);var e=this._newSelectionRect(),o=this._scrollSpeed||500;this._timeoutID=setInterval(function(){if(o===this._scrollSpeed){var i=this._hosts[0].getScrollTop(),n=this._hosts[0].getScrollLeft(),r=t.y>0,s=t.x>0,l=this._map[0].section.getCellWidth(),h=this._map[0].section.getCellHeight(),u=r?i+l:i-l,c=s?n+h:n-h;if(0!==t.y){this._hosts[0].setScrollTop(u);var a=this._hosts[0].getVScrollView(),_=this._isEndOfVerticalScroll();if(r){var d=a.lastFullRow;this._prevRect&&this._prevRect.bottom>d&&!_?e.top=d:e.bottom=_?this._hosts[0].getRowCount():d}else{var f=a.firstFullRow+2;this._prevRect&&this._prevRect.top<f&&!_?e.bottom=f+1:e.top=_?1:f}}if(0!==t.x){this._hosts[0].setScrollLeft(Math.floor(c));var g=this._isEndOfHorizontalScroll(),v=this._hosts[0].getWidth(),m=this._hosts[0].getColumnWidth(e.right+1);if(s){var y=this._hosts[0].getColumnLeft(e.right+1),b=this._hosts[0].getColumnLeft(e.right),S=this._hosts[0].getColumnRight(e.left+2),w=v-m;if(y<w)do{e.right+=1}while(this._hosts[0].getColumnLeft(e.right+1)<w);else if(b-l-v>0&&y>b&&S<v)do{e.left+=1}while(this._hosts[0].getColumnLeft(e.right+1)>b);else g&&(e.right=this._hosts[0].getColumnCount())}else{var x=this._hosts[0].getColumnRight(e.left-1),C=this._hosts[0].getColumnRight(e.left),R=this._hosts[0].getColumnRight(e.right-2);x-m>0?e.left-=1:C-l<0&&x<C&&R>2*m?e.right-=1:g&&(e.left=0)}}this._updateSelection(e),this._prevRect=Object(p.a)(e)}else this._setScrollInterval(t)}.bind(this),o)},f.prototype._isEndOfVerticalScroll=function(){var t=this._hosts[0].getScrollTop();return 0===t||t+this._hosts[0].getHeight()>this._hosts[0].getScrollHeight()},f.prototype._isEndOfHorizontalScroll=function(){var t=this._hosts[0].getScrollLeft();return 0===t||t+this._hosts[0].getWidth()>this._hosts[0].getScrollWidth()},f.prototype._onMouseUp=function(t){this._timeoutID&&(clearTimeout(this._timeoutID),this._mouseOutOfGrid=!1),!this._disabled&&this._dirty&&(this._hosts[0].removeAttribute("draggable"),this._draggable=!1,this._isIE&&(this._lastMouseUpTimeStamp=t.timeStamp),this._updateSelectionText(),this._dispatch("selectionChanged",{}),this._dirty=!1)},f.prototype._updateSelectionText=function(){var t=this._getGridHiddenInput();if(t){this._textRange.setStart(t.parentNode,0),this._textRange.setEnd(t,0);var e=window.getSelection();e.removeAllRanges(),e.addRange(this._textRange)}this._isIE&&this._getActiveGrid().getParent().focus()},f.prototype._onBlur=function(t){this._dirty||this._autoDeselecting&&(this._lastMouseUpTimeStamp&&t.timeStamp-this._lastMouseUpTimeStamp<100||this.deselectAll()&&this._dispatch("selectionChanged",{}))},f.prototype._onColumnMoved=function(t){var e=this._curRect,o=t.fromColIndex,i=t.toColIndex;if(!(o<e.left&&i<e.left||o>=e.right&&i>=e.right)){var n;if(o<e.left)n=e.left-1;else if(o>=e.right)n=e.right;else{if(!(i<e.left||i>=e.right))return;n=i}for(var r=e.top;r<e.bottom;r++){var s=this._map[r],l=s.section.getCell(n,s.rowIndex);d(l)}this._updateSelectionText()}},f.prototype._isClickable=function(t,e){return!(!this._hosts[0]||!t||"CORAL-ICON"!==t.tagName&&"CORAL-HEADER"!==t.tagName&&0===t.tagName.indexOf("CORAL-"))&&!(this._unclickableMapping[t.tagName]&&!t.classList.contains("valigner"))},f.prototype._onCopy=function(t){var e,o,i={grid:this._hosts[0],sender:this,data:"",format:"",clipboards:[]};if(this._dispatch("copy",i),t.clipboardData?(e=t.clipboardData,o="text/plain"):(e=window.clipboardData,o="Text"),i.data)e.setData(i.format||o,i.data);else{var r=this.getSelectedText();r&&e.setData(o,r)}for(var s=i.clipboards?i.clipboards.length:0,l=0;l<s;++l){var h=i.clipboards[l];h.format&&e.setData(h.format,h.data||"")}n.preventDefault(t)},f.prototype._onTab=function(t){if(9===t.keyCode){if(t.altKey||t.ctrlKey)return;(t.shiftKey?this.selectPrevCell():this.selectNextCell())&&n.preventDefault(t)}},f.prototype._onPostSectionDataBinding=function(t){var e=this._getActiveGrid();if(this.getSelectionCount()>0&&e===t.sender){var o,i,n,r=t.section.getRowOffset(),s=this._curRect.top-r,l=this._curRect.bottom-r,h=this._curRect.left,u=this._curRect.right;for(i=t.fromRowIndex;i<t.toRowIndex;i++)if(i>=s&&i<l)for(n=h;n<u;n++)o=t.section.getCell(n,i),_(o);else for(n=h;n<u;n++)o=t.section.getCell(n,i),d(o)}},f.prototype._isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},f.prototype._cacheSectionMap=function(){var t=this._hosts[0].getSectionCount(),e=0,o=0;this._hasCellSpan=!1;for(var i=this._getActiveGrid(),n=0;n<t;++n){var r=i.getSectionSettings(n),s=r.getSection(),l=s.hasCellSpan();o=s.getRowCount();for(var h=0;h<o;++h){var u={};u.section=s,u.hasCellSpan=l,u.sectionIndex=n,u.rowIndex=h,u.type=r.getType(),this._map[e]=u,e++}this._hasCellSpan|=l}this._map.length=e},f.prototype._getCumulativeIndex=function(t){var e=t.section;return e?"string"!=typeof e&&"number"!=typeof e||(e=this._hosts[0].getSection(e)):e=this._hosts[0].getSection("content"),e.getRowOffset()+t.rowIndex},f.prototype._newSelectionRect=function(){if(!this._anchor||!this._curMouse)return this._curRect;var t={};"row"!==this._mode?this._anchor.colIndex<=this._curMouse.colIndex?(t.left=this._anchor.colIndex,t.right=this._curMouse.colIndex+1):(t.left=this._curMouse.colIndex,t.right=this._anchor.colIndex+1):(t.left=0,t.right=this._hosts[0].getColumnCount());var e=this._getCumulativeIndex(this._curMouse),o=this._getCumulativeIndex(this._anchor);return"column"!==this._mode?o<=e?(t.top=o,t.bottom=e+1):(t.top=e,t.bottom=o+1):(t.top=0,t.bottom=this._hosts[0].getRowCount()),this._scanCellSpans(t),t},f.prototype._scanCellSpans=function(t){if(this._hasCellSpan){var e=0,o=0,i=!1;do{for(i=!1,e=t.left;e<t.right;++e)i|=this._expandRect(e,t.top,t);for(e=t.right-1,o=t.top+1;o<t.bottom;++o)i|=this._expandRect(e,o,t);for(o=t.bottom-1,e=t.right-1;--e>=t.left;)i|=this._expandRect(e,o,t);for(o=t.bottom-1;--o>=t.top;)i|=this._expandRect(t.left,o,t)}while(i)}},f.prototype._expandRect=function(t,e,o){var i=this._map[e];if(!i.hasCellSpan)return!1;if(!0===this._unselectables[i.type])return!1;var n=!1,r=0,s=i.section.getCellColSpan(t,i.rowIndex);s>1?(r=t+s)>o.right&&(o.right=r,n=!0):s<0&&((r=t+s)<o.left&&(o.left=r,n=!0),(r+=s=i.section.getCellColSpan(r,i.rowIndex))>o.right&&(o.right=r,n=!0));var l=i.section.getCellRowSpan(t,i.rowIndex);return l>1?(r=i.section.getRowOffset()+i.rowIndex+l)>o.bottom&&(o.bottom=r,n=!0):l<0&&((r=i.section.getRowOffset()+i.rowIndex+l)<o.top&&(o.top=r,n=!0),(r+=l=i.section.getCellRowSpan(t,r))>o.bottom&&(o.bottom=r,n=!0)),n},f.prototype._updateSelection=function(t){this._updateColumnSelection(t.left,this._curRect.left),this._curRect.left=t.left,this._updateColumnSelection(this._curRect.right,t.right),this._curRect.right=t.right,this._updateRowSelection(t.top,this._curRect.top),this._curRect.top=t.top,this._updateRowSelection(this._curRect.bottom,t.bottom),this._curRect.bottom=t.bottom},f.prototype._updateColumnSelection=function(t,e){var o,i;if(t!==e)if(t<e)for(i=this._curRect.top;i<this._curRect.bottom;++i)for(o=t;o<e;++o)this._selectAsPosition(i,o,!0);else for(i=this._curRect.top;i<this._curRect.bottom;++i)for(o=t;--o>=e;)this._selectAsPosition(i,o,!1)},f.prototype._updateRowSelection=function(t,e){var o,i;if(t!==e)if(t<e)for(i=t;i<e;++i)for(o=this._curRect.left;o<this._curRect.right;++o)this._selectAsPosition(i,o,!0);else for(i=t;--i>=e;)for(o=this._curRect.left;o<this._curRect.right;++o)this._selectAsPosition(i,o,!1)},f.prototype._selectAsPosition=function(t,e,o){var i=this._map[t];if(i&&!0!==this._unselectables[i.type]){var n=i.section.getCell(e,i.rowIndex);o?_(n):d(n)}},f.prototype._isTheSamePosition=function(t,e){return null===t&&null===e||null!==t&&null!==e&&(t.rowIndex===e.rowIndex&&t.colIndex===e.colIndex&&t.sectionIndex===e.sectionIndex)},f.prototype._getGridHiddenInput=function(){return this._hosts[0]?this._hosts[0].getHiddenInput():null},f.prototype.getSelectedText=function(){var t=this._getActiveGrid();if(!t||!this.getGridApi()||this.getSelectionCount()<=0)return"";for(var e="",o=t.getDataSource(),i=this._curRect.top;i<this._curRect.bottom;++i){var n=this._map[i];i!==this._curRect.top&&(e+="\n");var r=null;if(!0!==this._unselectables[n.type]){"content"===n.type&&(r=this._getRow(o,n.rowIndex));for(var s=this._curRect.left;s<this._curRect.right;++s)if(s!==this._curRect.left&&(e+="\t"),"content"===n.type){if(r){var l=this._getField(s);e+=Object(p.c)(r[l])}}else{var h=n.section.getCell(s,n.rowIndex).getTextContent();e+=Object(p.c)(h)}}}return e},f.prototype.selectAll=function(){var t=this._getActiveGrid(),e={left:0,right:t.getColumnCount(),top:0,bottom:t.getRowCount()};this.deselectAll(),this._anchor={grid:t},this._cacheSectionMap(),this._scanCellSpans(e),this._updateSelection(e),this._dispatch("selectionChanged",{})},f.prototype.deselectAll=function(){if(this.getSelectionCount()<=0)return!1;for(var t=this._getActiveGrid().getElement().querySelectorAll("div.cell.selection"),e=t.length,o=0;o<e;o++)t[o].classList.remove("selection");return this._lastSelection=this.getSelectionBounds(),this._anchor=null,this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top,!0},f.prototype.getSelectionCount=function(){return(this._curRect.right-this._curRect.left)*(this._curRect.bottom-this._curRect.top)},f.prototype.getSelectionBounds=function(t){if(this.getSelectionCount()<=0)return null;var e=null!=t?t:{};if(e.left=this._curRect.left,e.right=this._curRect.right-1,e.top=this._curRect.top,e.bottom=this._curRect.bottom-1,this._map.length>0&&e.bottom<this._map.length){var o=this._map[e.top];e.startSection=o.sectionIndex,e.startSectionRow=o.rowIndex,o=this._map[e.bottom],e.endSection=o.sectionIndex,e.endSectionRow=o.rowIndex}return e},f.prototype.getLastSelectionBounds=function(t){if(null===this._lastSelection)return null;var e=null!=t?t:{};for(var o in this._lastSelection)e[o]=this._lastSelection[o];return e},f.prototype.setSelectableSections=function(t){if(this._unselectables.content=!0,this._unselectables.header=!0,this._unselectables.title=!0,!t)return this._unselectables.content=!1,this._unselectables.header=!1,void(this._unselectables.title=!1);for(var e="string"==typeof t?[t]:t,o=e.length;--o>=0;)this._unselectables[e[o]]=!1},f.prototype.selectSingleCell=function(t){if(this.deselectAll(),t){this._anchor=t,this._curMouse=t,this._cacheSectionMap(),this._curRect.left=this._anchor.colIndex,this._curRect.top=this._getCumulativeIndex(this._anchor),this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top;var e=this._newSelectionRect();this._updateSelection(e)}},f.prototype.selectCells=function(t){if(this.deselectAll(),t){this._anchor=t,this._curMouse={rowIndex:t.rowIndex+(t.height-1),colIndex:t.colIndex+(t.width-1)},this._cacheSectionMap(),this._curRect.left=this._anchor.colIndex,this._curRect.top=this._getCumulativeIndex(this._anchor),this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top;var e=this._newSelectionRect();this._updateSelection(e)}},f.prototype.selectNextCell=function(){var t;if(this._anchor){var e=this._getActiveGrid();"row"==this._mode?t=e.getCellInfo({colIndex:0,rowIndex:this._anchor.rowIndex+1}):"column"==this._mode?t=e.getCellInfo({colIndex:this._anchor.colIndex+1,rowIndex:0}):(t=e.getNextCell(this._anchor))&&!t.cell&&(t=null),t&&(t.grid=e),this.selectSingleCell(t)}return!!t},f.prototype.selectPrevCell=function(){var t;if(this._anchor){var e=this._getActiveGrid();"row"==this._mode?t=e.getCellInfo({colIndex:0,rowIndex:this._anchor.rowIndex-1}):"column"==this._mode?t=e.getCellInfo({colIndex:this._anchor.colIndex-1,rowIndex:0}):(t=e.getPrevCell(this._anchor))&&!t.cell&&(t=null),t&&(t.grid=e),this.selectSingleCell(t)}return!!t},f.prototype.getAnchorInfo=function(){return this._getActiveGrid().getCellInfo(this._anchor)},f.prototype.getSelectedCells=function(){for(var t=[],e=this._curRect.top;e<this._curRect.bottom;++e){for(var o=this._map[e],i=[],n=this._curRect.left;n<this._curRect.right;++n){var r=o.section.getCell(n,o.rowIndex);i.push(r)}t.push(i)}return t},f.prototype.disableSelection=function(t){this._disabled=!1!==t},f.prototype.setAutoDeselectingOnBlur=function(t){this._autoDeselecting=t},f.prototype.getAutoDeselectingOnBlur=function(){return this._autoDeselecting};!function(t,e){if(t&&e&&e.prototype.getName){var o=e.prototype.getName().replace(/Plugin$/,"");if(o){var i=t.tr;i||(i=t.tr={});var n=i.grid;n||(n=i.grid={}),n[o+"Plugin"]=e,i[o+"Extension"]=e}}}(window,f)}]);