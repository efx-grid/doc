<!doctype html>
<html pandora>

<head>
  <title>Event Handling in Formatter</title>
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="x-pandora-base" content="../">
  <meta name="x-pandora-location" content="rendering/formatter-event-handling.html">
  <link rel="stylesheet" href="../../../resources/styles/book.css">
  <script defer src="../../../resources/scripts/book.js"></script>
  <script defer src="../search.index.js"></script>
  <link rel="icon" href="../resources/images/icon.png">
</head>

<body>
  <pandora-book>
    <div class="header" no-print>
      <div class="book-icon" style="background-image:url(&quot;../resources/images/icon.png&quot;)"></div>
      <h1><a href="../index.html">Grid Usage Guide</a></h1>
      <div class="search">
        <input type="search" placeholder="Type to search...">
      </div>
    </div>
    <div class="content">
      <div class="sidebar" no-print>
        <pandora-nav id="054b08f0-a736-46cc-a7bd-42269a3371a3">
          <ul>
            <li><a href="../index.html">Overview</a></li>
            <li parent id="cid-0" collapsible collapsed>
              <div collapser>General Concept</div>
              <ul>
                <li><a href="../general_concept/basic.html">Basic Grid Creation</a></li>
                <li><a href="../general_concept/initializing-data.html">Initializing Data</a></li>
                <li><a href="../general_concept/event-listeners.html">Event Listeners</a></li>
                <li><a href="../general_concept/typescript.html">Adding TypeScript</a></li>
                <li><a href="../general_concept/disposing-grid.html">Disposing Grid</a></li>
              </ul>
            </li>
            <li parent id="cid-1" collapsible collapsed>
              <div collapser>Showcases</div>
              <ul>
                <li><a href="../showcases/comprehensive.html">Comprehensive</a></li>
              </ul>
            </li>
            <li parent id="cid-4" collapsible collapsed>
              <div collapser>APIs</div>
              <ul>
                <li><a href="../apis/README.html">Overview</a></li>
                <li parent id="cid-2" collapsible collapsed>
                  <div collapser>Composite Grid (Emerald Grid)</div>
                  <ul>
                    <li><a href="../apis/composite_grid/tr.ColumnStats.html">tr.ColumnStats</a></li>
                    <li><a href="../apis/composite_grid/tr.CompositeGrid.html">tr.CompositeGrid</a></li>
                    <li><a href="../apis/composite_grid/tr.DataCache.html">tr.DataCache</a></li>
                    <li><a href="../apis/composite_grid/tr.DataTable.html">tr.DataTable</a></li>
                    <li><a href="../apis/composite_grid/tr.DataView.html">tr.DataView</a></li>
                    <li><a href="../apis/composite_grid/tr.ElementControl.html">tr.ElementControl</a></li>
                    <li><a href="../apis/composite_grid/tr.ElementWrapper.html">tr.ElementWrapper</a></li>
                    <li><a href="../apis/composite_grid/tr.Event.html">tr.Event</a></li>
                    <li><a href="../apis/composite_grid/tr.EventDispatcher.html">tr.EventDispatcher</a></li>
                    <li><a href="../apis/composite_grid/tr.Grid.html">tr.Grid</a></li>
                    <li><a href="../apis/composite_grid/tr.IElementControl.html">tr.IElementControl</a></li>
                    <li><a href="../apis/composite_grid/tr.ILayoutGrid.html">tr.ILayoutGrid</a></li>
                    <li><a href="../apis/composite_grid/tr.LayoutGrid.html">tr.LayoutGrid</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.Cell.html">tr.grid.Cell</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.CellSpans.html">tr.grid.CellSpans</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.DragAndDropTitlePlugin.html">tr.grid.DragAndDropTitlePlugin</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.HScrollbar.html">tr.grid.HScrollbar</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.ResizableTitlePlugin.html">tr.grid.ResizableTitlePlugin</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.Scrollbar.html">tr.grid.Scrollbar</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.SectionSettings.html">tr.grid.SectionSettings</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.SortableTitlePlugin.html">tr.grid.SortableTitlePlugin</a></li>
                    <li><a href="../apis/composite_grid/tr.grid.VScrollbar.html">tr.grid.VScrollbar</a></li>
                  </ul>
                </li>
                <li parent id="cid-3" collapsible collapsed>
                  <div collapser>Real-time Grid (Atlas Blotter)</div>
                  <ul>
                    <li><a href="../apis/rt_grid/ColumnDefinition.html">ColumnDefinition</a></li>
                    <li><a href="../apis/rt_grid/Grid.html">Grid</a></li>
                    <li><a href="../apis/rt_grid/RowDefinition.html">RowDefinition</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li parent id="cid-5" collapsible collapsed>
              <div collapser>Extensions</div>
              <ul>
                <li><a href="../extensions/README.html">Overview</a></li>
                <li><a href="../extensions/tr-grid-auto-tooltip.html">Auto Tooltip</a></li>
                <li><a href="../extensions/tr-grid-cell-selection.html">Cell Selection</a></li>
                <li><a href="../extensions/tr-grid-checkbox.html">Checkbox Column</a></li>
                <li><a href="../extensions/tr-grid-column-fitter.html">Column Fitter</a></li>
                <li><a href="../extensions/tr-grid-column-formatting.html">Column Formatting</a></li>
                <li><a href="../extensions/tr-grid-column-grouping.html">Column Grouping</a></li>
                <li><a href="../extensions/tr-grid-column-resizing.html">Column Resizing</a></li>
                <li><a href="../extensions/tr-grid-column-selection.html">Column Selection</a></li>
                <li><a href="../extensions/tr-grid-column-stack.html">Column Stack</a></li>
                <li><a href="../extensions/tr-grid-conditional-coloring.html">Conditional Coloring</a></li>
                <li><a href="../extensions/tr-grid-content-wrap.html">Content Wrap</a></li>
                <li><a href="../extensions/tr-grid-contextmenu.html">Context Menu</a></li>
                <li><a href="../extensions/tr-grid-filter-input.html">Filter Input</a></li>
                <li><a href="../extensions/tr-grid-heat-map.html">Heat Map</a></li>
                <li><a href="../extensions/tr-grid-in-cell-editing.html">In-Cell Editing</a></li>
                <li><a href="../extensions/tr-grid-pagination.html">Pagination</a></li>
                <li><a href="../extensions/tr-grid-percent-bar.html">Percent Bar</a></li>
                <li><a href="../extensions/tr-grid-range-bar.html">Range Bar</a></li>
                <li><a href="../extensions/tr-grid-row-dragging.html">Row Dragging</a></li>
                <li><a href="../extensions/tr-grid-row-filtering.html">Row Filtering</a></li>
                <li><a href="../extensions/tr-grid-row-grouping.html">Row Grouping</a></li>
                <li><a href="../extensions/row-segmenting.html">Row Segmenting</a></li>
                <li><a href="../extensions/tr-grid-row-selection.html">Row Selection</a></li>
                <li><a href="../extensions/tr-grid-rowcoloring.html">Row Coloring</a></li>
                <li><a href="../extensions/statistics-row.html">Statistics Row</a></li>
                <li><a href="../extensions/tr-grid-textformatting.html">Text Formatting</a></li>
                <li><a href="../extensions/tr-grid-titlewrap.html">Title Wrap</a></li>
                <li><a href="../extensions/zoom.html">Zoom</a></li>
              </ul>
            </li>
            <li parent id="cid-6" collapsible collapsed>
              <div collapser>Content Rendering</div>
              <ul>
                <li selected><a href="../rendering/formatter-event-handling.html">Event Handling in Formatter</a></li>
              </ul>
            </li>
            <li parent id="cid-7" collapsible collapsed>
              <div collapser>Data</div>
              <ul>
                <li><a href="../data/columns-and-data.html">Resetting/Clearing Data</a></li>
              </ul>
            </li>
            <li parent id="cid-8" collapsible collapsed>
              <div collapser>Columns</div>
              <ul>
                <li><a href="../columns/column-resetting.html">Column Resetting</a></li>
                <li><a href="../columns/column-alignment.html">Column Alignment</a></li>
                <li><a href="../columns/dynamic-add-insert-column.html">Column Add/insert</a></li>
                <li><a href="../columns/dynamic-remove-column.html">Column Hide/remove</a></li>
                <li><a href="../columns/column-width.html">Column Width</a></li>
                <li><a href="../columns/column-reordering.html">Column Reordering</a></li>
                <li><a href="../columns/column-moving.html">Column Moving</a></li>
                <li><a href="../columns/column-freezing.html">Column Freezing</a></li>
                <li><a href="../columns/column-pinning.html">Column Pinning</a></li>
                <li><a href="../columns/column-styling.html">Column Styling</a></li>
                <li><a href="../columns/column-grouping.html">Column Grouping</a></li>
              </ul>
            </li>
            <li parent id="cid-9" collapsible collapsed>
              <div collapser>Rows</div>
              <ul>
                <li><a href="../rows/row-highlight-selection.html">Row Highlighting / Selection</a></li>
                <li><a href="../rows/row-height.html">Row Height</a></li>
                <li><a href="../rows/row-show-hide.html">Row Showing / Hiding</a></li>
                <li><a href="../rows/row-reordering.html">Row Reordering</a></li>
                <li><a href="../rows/add-header-footer.html">Adding Header &amp; Footer Sections</a></li>
                <li><a href="../rows/row-grouping.html">Row Grouping</a></li>
              </ul>
            </li>
            <li parent id="cid-10" collapsible collapsed>
              <div collapser>Scrollbars</div>
              <ul>
                <li><a href="../scrollbars/vertical-scrollbar.html">Vertical Scrollbar</a></li>
                <li><a href="../scrollbars/horizontal-scrollbar.html">Horizontal Scrollbar</a></li>
                <li><a href="../scrollbars/scroll-speed.html">Scroll Speed</a></li>
                <li><a href="../scrollbars/non-overlap-scrollbars.html">Non-Overlap Scrollbars</a></li>
                <li><a href="../scrollbars/scrollbar-visibility.html">Scrollbar Visibility</a></li>
                <li><a href="../scrollbars/left-side-column-pinning.html">Left Side Column Pinning/Freezing</a></li>
                <li><a href="../scrollbars/right-side-column-pinning.html">Right Side Column Pinning/Freezing</a></li>
              </ul>
            </li>
            <li parent id="cid-11" collapsible collapsed>
              <div collapser>Sorting</div>
              <ul>
                <li><a href="../sorting/sorting.html">Basic Sorting</a></li>
                <li><a href="../sorting/default-sorting.html">Default Sort</a></li>
                <li><a href="../sorting/server-side-sorting.html">Server Side Sorting</a></li>
                <li><a href="../sorting/multi-column-sorting.html">Multi-Column/3-States Sorting</a></li>
                <li><a href="../sorting/sorting-get-reset.html">Get Sort States / Reset All Sorting</a></li>
              </ul>
            </li>
            <li parent id="cid-12" collapsible collapsed>
              <div collapser>Filtering</div>
              <ul>
                <li><a href="../filtering/filtering-programmatically.html">Filtering Programmatically</a></li>
                <li><a href="../filtering/filtering-auto-filter-row.html">Filter UI</a></li>
                <li><a href="../filtering/custom-filter.html">Custom Filter UI</a></li>
                <li><a href="../filtering/filtering-get-reset.html">Get Filter States / Reset All</a></li>
              </ul>
            </li>
            <li parent id="cid-13" collapsible collapsed>
              <div collapser>Editing</div>
              <ul>
                <li><a href="../editing/in-cell-editor.html">In-Cell Editing</a></li>
                <li><a href="../editing/custom-editor.html">Custom Editor</a></li>
              </ul>
            </li>
            <li parent id="cid-14" collapsible collapsed>
              <div collapser>Miscellaneous</div>
              <ul>
                <li><a href="../misc/core-apis.html">Using Core APIs</a></li>
                <li><a href="../misc/real-time-market-data.html">Realtime Market Data</a></li>
              </ul>
            </li>
          </ul>
        </pandora-nav>
      </div>
      <div class="main">
        <div class="reader">
          <pandora-page>
            <h1 id="event-handling-and-listener-in-formatter">Event Handling and Listener in Formatter</h1>
            <p>If your custom formatter contains some input elements or controls, it&apos;s important to bind data back to Grid&apos;s internal data source when users input new data through the UI from your custom formatter. Remember, the same element will be used on different rows due to the row virtualization mechanic. If the data is changed by user actions, you need to update the change back to Grid&apos;s data source, or else the binding mechanism will replace what the user has changed with the data stored from the Grid&apos;s internal source. </p>
            <p>In short, <code>setDataAt()</code> method should be used to set data to Grid after users interact with the formatter and <code>getRelativePosition()</code> method should be used to resolve current positions relative to the grid element.</p>
            <blockquote>
              <p>APIs for data manipulation can be found <a href="../apis/composite_grid/tr.DataView.html">here</a>. APIs for Grid and <code>getRelativePosition()</code> method description can be found <a href="../apis/composite_grid/tr.CompositeGrid.html">here</a>.</p>
            </blockquote>
            <h2 id="the-reverted-problem">The &apos;reverted&apos; problem</h2>
            <p>When you don&apos;t set data back, row virtualization will not work properly and content will not be rendered properly. Suppose that you have a dropdown element in one of the grid columns. Any change that is done to the dropdown box will be reverted if you don&apos;t update the data.</p>
            <p>In the live example below, try the following steps to produce the problem:</p>
            <ol>
              <li>Change the selected option from the dropdown box on the first row. Remember the new selected option</li>
              <li>Scroll down to the bottom of the grid</li>
              <li>Scroll back up to the top of the grid.</li>
            </ol>
            <h2 id="the-reverted-problem">The &apos;reverted&apos; Problem</h2>
            <p>When we don&apos;t set data back, row virtualization will not work properly and content will not be rendered properly. Suppose that we have a dropdown element in one of the grid columns. Any change that is done to the dropdown box will be reverted if we don&apos;t update the data.</p>
            <p>In the live example below, try the following steps to produce the problem:</p>
            <ol>
              <li>Change the selected option from the dropdown box on the first row. Remember the new selected option</li>
              <li>Scroll down to the bottom of the grid</li>
              <li>Scroll back up to the top of the grid</li>
            </ol>

            <div class="pandora-code-viewer" id="pid-57">
              <div class="pandora-viewer">
                <button>&lt;/&gt;</button>
              </div>
              <div class="pandora-code-view">
                <div class="pandora-toolbar">
                  <ul>
                    <li class="pandora-tab-selected" data-toggle="tab-html">HTML</li>
                    <li data-toggle="tab-js">JS</li>
                    <li data-toggle="tab-css">CSS</li>
                  </ul>
                </div>
                <div class="pandora-tab-container">
                  <pre class="pandora-tab-view tab-html">&lt;emerald-grid&gt;
&lt;/emerald-grid&gt;</pre>
                  <pre class="pandora-tab-view tab-js">// For static data initialization
var data2D = [];
for (var i = 0; i &lt; 20; i++) {
  data2D.push([
    i % 4,
    i + &quot; Some Texts&quot;,
    i &amp; 1 ? true : false,
    i / (i + 1)
  ]);
}

var dropdownFormatter = {
  render: function() {},
  bind: function(rowIndex, colIndex, value, cell) {
    var dropdown = cell.getContent();
    if (!dropdown || !dropdown._myDropdown) {
      dropdown = document.createElement(&quot;select&quot;);
      dropdown._myDropdown = true;
      [0, 1, 2, 3].forEach(function(val) {
        var option = document.createElement(&quot;option&quot;);
        option.value = val;
        option.textContent = &quot;Value &quot; + val;
        dropdown.appendChild(option);
      });
    }

    dropdown.selectedIndex = value;
    cell.setContent(dropdown);
  }
};

var fields = [&quot;intCol&quot;, &quot;strCol&quot;, &quot;boolCol&quot;, &quot;floatCol&quot;];
var configObj = {
  rowHighlight: false,
  rowSelection: true,
  columnSelection: true,
  columns: [
    { title: &quot;Column 1&quot;, field: fields[0] },
    { title: &quot;Column 3&quot;, field: fields[2], alignment: &quot;center&quot; },
    { title: &quot;Column 4&quot;, field: fields[3], alignment: &quot;right&quot; },
    { title: &quot;Dropdown&quot;, field: fields[0], formatter: dropdownFormatter }
  ],
  dataModel: {
    fields: fields,
    format: &quot;array&quot;,
    data: data2D
  }
};

var grid = document.getElementsByTagName(&quot;emerald-grid&quot;)[0];
grid.config = configObj;</pre>
                  <pre class="pandora-tab-view tab-css">emerald-grid {
  height: 200px;
}</pre>
                  <div class="pandora-console"></div>
                </div>
              </div>
              <link rel="prefetch" href="../node_modules/tr-grid-test-resource-v4/dist/elf-halo-light.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-util/dist/mock-jet.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-auto-tooltip/dist/tr-grid-auto-tooltip.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-cell-selection/dist/tr-grid-cell-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-checkbox/dist/tr-grid-checkbox.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-fitter/dist/tr-grid-column-fitter.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-formatting/dist/tr-grid-column-formatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-grouping/dist/tr-grid-column-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-resizing/dist/tr-grid-column-resizing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-selection/dist/tr-grid-column-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-stack/dist/tr-grid-column-stack.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-conditional-coloring/dist/tr-grid-conditional-coloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-content-wrap/dist/tr-grid-content-wrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-contextmenu/dist/tr-grid-contextmenu.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-filter-input/dist/tr-grid-filter-input.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-heat-map/dist/tr-grid-heat-map.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-in-cell-editing/dist/tr-grid-in-cell-editing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-pagination/dist/tr-grid-pagination.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-percent-bar/dist/tr-grid-percent-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-range-bar/dist/tr-grid-range-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-dragging/dist/tr-grid-row-dragging.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-filtering/dist/tr-grid-row-filtering.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-grouping/dist/tr-grid-row-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/row-segmenting/dist/row-segmenting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-selection/dist/tr-grid-row-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-rowcoloring/dist/tr-grid-rowcoloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/statistics-row/dist/statistics-row.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-textformatting/dist/tr-grid-textformatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-titlewrap/dist/tr-grid-titlewrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/zoom/dist/zoom.min.js" type="script">
            </div>
            <p>You will see that the selected option is reverted back to the original option.</p>
            <h2 id="the-fix">The fix</h2>
            <p>To avoid the problem, we have to add an event listener to our custom formatter for binding the change from users. You have added <code>dropdownChangeHandler</code> to fix the problem as shown below:</p>

            <div class="pandora-code-viewer" id="pid-58">
              <div class="pandora-viewer">
                <button>&lt;/&gt;</button>
              </div>
              <div class="pandora-code-view">
                <div class="pandora-toolbar">
                  <ul>
                    <li class="pandora-tab-selected" data-toggle="tab-html">HTML</li>
                    <li data-toggle="tab-js">JS</li>
                    <li data-toggle="tab-css">CSS</li>
                  </ul>
                </div>
                <div class="pandora-tab-container">
                  <pre class="pandora-tab-view tab-html">&lt;emerald-grid&gt;
&lt;/emerald-grid&gt;</pre>
                  <pre class="pandora-tab-view tab-js">// For static data initialization
var data2D = [];
for (var i = 0; i &lt; 20; i++) {
  data2D.push([
    i % 4,
    i + &quot; Some Texts&quot;,
    i &amp; 1 ? true : false,
    i / (i + 1)
  ]);
}

// Show how to render custom content with an event listener
var dropdownFormatter = {
  render: function() {},
  bind: function(rowIndex, colIndex, value, cell) {
    var dropdown = cell.getContent();
    if (!dropdown || !dropdown._myDropdown) {
      dropdown = document.createElement(&quot;select&quot;);
      dropdown._myDropdown = true;
      [0, 1, 2, 3].forEach(function(val) {
        var option = document.createElement(&quot;option&quot;);
        option.value = val;
        option.textContent = &quot;Value &quot; + val;
        dropdown.appendChild(option);
      });

      dropdown.addEventListener(&quot;change&quot;, dropdownChangeHandler);
    }
    dropdown.selectedIndex = value;
    cell.setContent(dropdown);
  }
};
// Show how to set data based on interaction from custom content
var dropdownChangeHandler = function(e) {
  var dropdown = e.currentTarget;
  var pos = grid.api.getRelativePosition(e);
  var dv = grid.api.getDataView();

  var selectedIndex = dropdown.options[dropdown.selectedIndex].value;
  dv.setDataAt(pos.rowIndex, grid.api.getColumnField(pos.colIndex), +selectedIndex);
};

var fields = [&quot;intCol&quot;, &quot;strCol&quot;, &quot;boolCol&quot;, &quot;floatCol&quot;];
var configObj = {
  rowHighlight: false,
  rowSelection: true,
  columnSelection: true,
  columns: [
    { title: &quot;Column 1&quot;, field: fields[0] },
    { title: &quot;Column 3&quot;, field: fields[2], alignment: &quot;center&quot; },
    { title: &quot;Column 4&quot;, field: fields[3], alignment: &quot;right&quot; },
    { title: &quot;Dropdown&quot;, field: fields[0], formatter: dropdownFormatter }
  ],
  dataModel: {
    fields: fields,
    format: &quot;array&quot;,
    data: data2D
  }
};

var grid = document.getElementsByTagName(&quot;emerald-grid&quot;)[0];
grid.config = configObj;</pre>
                  <pre class="pandora-tab-view tab-css">emerald-grid {
  height: 200px;
}</pre>
                  <div class="pandora-console"></div>
                </div>
              </div>
              <link rel="prefetch" href="../node_modules/tr-grid-test-resource-v4/dist/elf-halo-light.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-util/dist/mock-jet.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-auto-tooltip/dist/tr-grid-auto-tooltip.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-cell-selection/dist/tr-grid-cell-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-checkbox/dist/tr-grid-checkbox.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-fitter/dist/tr-grid-column-fitter.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-formatting/dist/tr-grid-column-formatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-grouping/dist/tr-grid-column-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-resizing/dist/tr-grid-column-resizing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-selection/dist/tr-grid-column-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-stack/dist/tr-grid-column-stack.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-conditional-coloring/dist/tr-grid-conditional-coloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-content-wrap/dist/tr-grid-content-wrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-contextmenu/dist/tr-grid-contextmenu.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-filter-input/dist/tr-grid-filter-input.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-heat-map/dist/tr-grid-heat-map.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-in-cell-editing/dist/tr-grid-in-cell-editing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-pagination/dist/tr-grid-pagination.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-percent-bar/dist/tr-grid-percent-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-range-bar/dist/tr-grid-range-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-dragging/dist/tr-grid-row-dragging.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-filtering/dist/tr-grid-row-filtering.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-grouping/dist/tr-grid-row-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/row-segmenting/dist/row-segmenting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-selection/dist/tr-grid-row-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-rowcoloring/dist/tr-grid-rowcoloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/statistics-row/dist/statistics-row.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-textformatting/dist/tr-grid-textformatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-titlewrap/dist/tr-grid-titlewrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/zoom/dist/zoom.min.js" type="script">
            </div>
            <h2 id="writing-event-listeners">Writing event listeners</h2>
            <p>Since the same element will be used on different rows, you cannot use closure variables that are created or given within the <code>bind()</code> method. Row index, column index, or cell reference must be resolved at runtime inside the event listener. You can resolve the position by using Grid&apos;s <code>getRelativePosition()</code> method.</p>
            <pre><code>    <span class="hljs-keyword">var</span> dropdownChangeHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> dropdown = e.currentTarget;
        <span class="hljs-keyword">var</span> pos = grid.api.getRelativePosition(e);
        <span class="hljs-keyword">var</span> dv = grid.api.getDataView();

        <span class="hljs-keyword">var</span> selectedIndex = dropdown.options[dropdown.selectedIndex].value;
        dv.setDataAt(pos.rowIndex, grid.api.getColumnField(pos.colIndex), +selectedIndex);
    };</code></pre>
            <ul>
              <li><code>currentTarget</code> property will always give an element attached by the event listener</li>
              <li><code>getRelativePosition()</code> method resolves the position when the dropdown value is changed</li>
              <li><code>setDataAt()</code> method sets data back to Grid&apos;s internal data source. But be careful of an <strong>inifinite loop</strong> when you are trying to update data during the binding operation. Use <code>isBinding()</code> to check and avoid this</li>
            </ul>
          </pandora-page>
          <div class="results"></div>
        </div>
      </div>
    </div>
  </pandora-book>
</body>

</html>