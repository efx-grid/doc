<link rel="stylesheet" href="../resources/styles/elf-template.css">

<h1 id="filter-dialog">Filter Dialog</h1>
<p>The Filter Dialog is a user-friendly interface for filtering and sorting.</p>
<h2 id="features">Features</h2>
<ul>
<li>Allow users to filter grid column values</li>
<li>Allow users to sort grid column values</li>
</ul>
<h2 id="demo">Demo</h2>
<p><code>Right-click</code> on each column header to see the dialog.</p>
<code-sandbox hash="310d8a41"><pre><code class="language-css">textarea {
    width: 100%;
    height: 100px;
}
efx-grid {
    min-height: 500px;
}
html hr {
    margin: 5px;
}
</code></pre>
<pre><code class="language-html">Language:
&lt;select id=&quot;lang_selector&quot;&gt;
    &lt;option value=&quot;en&quot;&gt;English&lt;/option&gt;
    &lt;option value=&quot;ja&quot;&gt;Japanese&lt;/option&gt;
    &lt;option value=&quot;de&quot;&gt;German&lt;/option&gt;
    &lt;option value=&quot;zh&quot;&gt;Simplified Chinese&lt;/option&gt;
    &lt;option value=&quot;zh-Hant&quot;&gt;Traditional Chinese&lt;/option&gt;
&lt;/select&gt;
&lt;hr&gt;
&lt;efx-grid id=&quot;grid&quot;&gt;&lt;/efx-grid&gt;
</code></pre>
<pre><code class="language-javascript">await (await import(&quot;./theme-loader.js&quot;)).default; // This line is only required for demo purpose. It is not relevant for using EFX Grid in your application.

/* ---------------------------------- Note ----------------------------------
  DataGenerator, Formatters and extensions are exposed to global scope
  in the bundle file to make it easier to create live examples.
  Importing formatters and extensions is still required in your application. 
  Please see the document for further information.
---------------------------------------------------------------------------*/
var rowFilteringExt = new RowFiltering();
var contextMenuExt = new ContextMenu();

var fields = [&quot;companyName&quot;, &quot;market&quot;, &quot;CF_LAST&quot;, &quot;CF_NETCHNG&quot;, &quot;ISODate&quot;];
var records = DataGenerator.generateRecords(fields, { numRows: 10 });
var configObj = {
    columns: [
        {title: &quot;Company&quot;, field: fields[0], sortable: true, dataType: &#39;text&#39;},
        {title: &quot;Market&quot;, field: fields[1], width: 100, sortable: true, dataType: &#39;text&#39;},
        {title: &quot;Last&quot;, field: fields[2], width: 100, sortable: true, dataType: &#39;number&#39;},
        {title: &quot;Net. Chng&quot;, field: fields[3], width: 100, sortable: true, dataType: &#39;number&#39;},
        {title: &quot;IPO Date&quot;, field: fields[4], sortable: true, dataType: &#39;datetime&#39;}
    ],
    dataModel: {
        data: records
    },
    contextMenu: {
        items: {
            MENU_1: {
                text: &#39;Filter&#39;,
                callback: function (e) {
                    var colIndex = e.colIndex;
                    var lang = document.getElementById(&quot;lang_selector&quot;).value;
                    var options = {
                        sortUI: true, // Show sorting section
                        filterUI: true, // Show filtering section
                        lang: lang,
                        fieldDataType: grid.api.getColumnDataType(colIndex)
                    };
                    rowFilteringExt.openDialog(colIndex, options);
                }
            },
        },
        onMenu: function (e) {
            e.menu.addItem(&#39;MENU_1&#39;);
        }
    },
    extensions: [
        rowFilteringExt,
        contextMenuExt
    ]
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;
</code></pre>
</code-sandbox><h2 id="setup-guide">Setup guide</h2>
<pre><code class="language-js"> // efx-grid
import &#39;@refinitiv-ui/efx-grid&#39;;
import &#39;@refinitiv-ui/efx-grid/themes/halo/light&#39;;

// Extensions
import { RowFiltering } from &#39;@refinitiv-ui/efx-grid/extensions&#39;;

// Filter Dialog module
import &#39;@refinitiv-ui/efx-grid/filter-dialog&#39;;
import &#39;@refinitiv-ui/efx-grid/filter-dialog/themes/halo/light&#39;;  // !Important. Theme must be imported.
</code></pre>
<p>Create a new Row Filtering Extension instance and push it to an <code>extensions</code> configuration.</p>
<pre><code class="language-js">var rfe = new RowFiltering();

var configObj = {
    extensions: [
        rfe,
    ],
    columns: columns, // Columns config
    dataModel: { // Data config
        fields: fields,
        data: dataRows
    },
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;
</code></pre>
<p>To open the dialog, you need to call <code>openDialog()</code> method on the extension object.</p>
<pre><code class="language-js">var filterChanged = function(e) {
    console.log(&#39;filterChanged&#39;, e.detail);
}

var confirm = function(e) {
    console.log(&#39;confirm&#39;, e.detail);
}

var sortChanged = function(e) {
    console.log(&#39;sortChanged&#39;, e.detail);
}
rfe.openDialog(0); // Change &quot;0&quot; to any column index.
</code></pre>
<h2 id="changing-language">Changing Language</h2>
<p>For more information about internationalization and how is it applied in different contexts see <a href="./widgets/language-support">Language Support</a>.</p>
<h2 id="using-with-the-context-menu-extension">Using with the <a href="./extensions/tr-grid-contextmenu">Context Menu Extension</a></h2>
<p>For most cases, you will want the dialog button to appear when the user right-clicks on the column header (known as the context menu).</p>
<p>To do this simply import the <code>Context Menu</code> extension and its configurations.</p>
<pre><code class="language-js">import {
  ContextMenu,
  RowFiltering
} from &#39;@refinitiv-ui/efx-grid/extensions&#39;;

var rfe = new RowFiltering();

var configObj = {
    extensions: [
        rfe,
        new ContextMenu(),
    ],
    columns: columns, // Columns config
    dataModel: { // Data config
        fields: fields,
        data: dataRows
    },
    contextMenu: {
        items: {
            MENU_1: {
                text: &quot;Format&quot;,
                callback: function (e) {
                    // Open the dialog when click on the &quot;Format&quot; menu
                    rfe.openDialog(e.colIndex);
                }
            },
        },
        onMenu: function (e) {
                e.menu.addItem(&quot;MENU_1&quot;);
        }
    },
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;
</code></pre>
<p>And that&#39;s it!</p>
<div></div>

<h2 style="margin-bottom:5px" id="api-refs">API Reference</h2>
<div id="elf-api-container"><div id="main-template" class="elf-template">    <section><article>                                                <h3 class="subsection-title" id="type_definitions">Type Definitions</h3>                        <div class="item">            <div class="item-type">typedef</div>    <h4 class="name" id="~Config">Config</h4>    <h5>Type:</h5>    <span class="param-type">Object</span>    <h5>Properties:</h5>    <div class="props"><table>    <thead>    <tr>                <th>Name</th>                <th>Type</th>                <th>Attributes</th>                        <th class="last">Description</th>    </tr>    </thead>    <tbody>            <tr>                            <td class="name"><code>data</code></td>                        <td class="type">                            <span class="param-type">Object</span>                        </td>                            <td class="attributes">                                                </td>                                    <td class="description last">Column data</td>        </tr>            <tr>                            <td class="name"><code>sortState</code></td>                        <td class="type">                            <span class="param-type">string</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">"a" for ascending or "d" for descending</td>        </tr>            <tr>                            <td class="name"><code>sortUI</code></td>                        <td class="type">                            <span class="param-type">boolean</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Show Sort area</td>        </tr>            <tr>                            <td class="name"><code>filterUI</code></td>                        <td class="type">                            <span class="param-type">boolean</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Show Filter area</td>        </tr>            <tr>                            <td class="name"><code>filterChanged</code></td>                        <td class="type">                            <span class="param-type">function</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Filter changed handler</td>        </tr>            <tr>                            <td class="name"><code>confirm</code></td>                        <td class="type">                            <span class="param-type">function</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Alias of filterChanged</td>        </tr>            <tr>                            <td class="name"><code>cancel</code></td>                        <td class="type">                            <span class="param-type">function</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Alias of dialog cancel</td>        </tr>            <tr>                            <td class="name"><code>sortChanged</code></td>                        <td class="type">                            <span class="param-type">function</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Sort changed handler</td>        </tr>        </tbody></table></div><div class="details">                                                            </div></div>                            <h3 class="subsection-title" id="methods">Methods</h3>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="hide"><span class="type-signature"></span>hide<span class="signature">()</span><span class="type-signature"></span></h4>                            <div class="description">        Hide the dialog    </div>                        <div class="details">                                                            </div>                                    </div>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="hideSortUI"><span class="type-signature"></span>hideSortUI<span class="signature">(val)</span><span class="type-signature"></span></h4>                            <div class="description">        Hide Sort UI block    </div>                            <h5>Parameters:</h5>        <div class="params">        <div class="param">                            <div class="name">val</div>                        <div class="type">                            <span class="param-type">boolean</span>                        </div>                                                    <div class="description">                    value                </div>                    </div>            </div>        <div class="details">                                                            </div>                                    </div>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="init"><span class="type-signature"></span>init<span class="signature">(options)</span><span class="type-signature"></span></h4>                            <div class="description">        Initialize dialog    </div>                            <h5>Parameters:</h5>        <div class="params">        <div class="param">                            <div class="name">options</div>                        <div class="type">                            <span class="param-type"><a href="#~Config">FilterDialog~Config</a></span>                        </div>                                                    <div class="description">                    initial data                </div>                    </div>            </div>        <div class="details">                                                            </div>                                    </div>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="setSortState"><span class="type-signature"></span>setSortState<span class="signature">(val)</span><span class="type-signature"></span></h4>                                                <h5>Parameters:</h5>        <div class="params">        <div class="param">                            <div class="name">val</div>                        <div class="type">                            <span class="param-type">string</span>                        </div>                                                    <div class="description">                    Sorting state "d" or "a"                </div>                    </div>            </div>        <div class="details">                                                            </div>                                    </div>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="show"><span class="type-signature"></span>show<span class="signature">()</span><span class="type-signature"></span></h4>                            <div class="description">        Show the dialog as a popup    </div>                        <div class="details">                                                            </div>                                    </div>                </article></section></div></div>