<link rel="stylesheet" href="../resources/styles/elf-template.css">

<h1 id="column-format-dialog">Column Format Dialog</h1>
<p>The Column Format Dialog is a user-friendly interface for column display customization. It can format a column&#39;s value display from <code>General</code> to <code>Number</code>, <code>Scaled</code>, <code>Percent</code> or <code>Datetime</code>, and so on.</p>
<h2 id="features">Features</h2>
<ul>
<li>Value formatting: number, scaled, date and time, and FX formats</li>
<li>Heatmap</li>
<li>Conditional coloring</li>
<li>Colored texts and background</li>
</ul>
<h2 id="demo">Demo</h2>
<p><code>Right-click</code> on each column header to see the dialog.</p>
<code-sandbox hash="365c4e99"><pre><code class="language-css">textarea {
  width: 100%;
  height: 100px;
}
efx-grid {
  min-height: 500px;
}
html hr {
  margin: 5px;
}
</code></pre>
<pre><code class="language-html">Language:
&lt;select id=&quot;lang_selector&quot;&gt;
  &lt;option value=&quot;en&quot;&gt;English&lt;/option&gt;
  &lt;option value=&quot;ja&quot;&gt;Japanese&lt;/option&gt;
  &lt;option value=&quot;de&quot;&gt;German&lt;/option&gt;
  &lt;option value=&quot;zh&quot;&gt;Simplified Chinese&lt;/option&gt;
  &lt;option value=&quot;zh-Hant&quot;&gt;Traditional Chinese&lt;/option&gt;
&lt;/select&gt;
&lt;hr&gt;
&lt;efx-grid id=&quot;grid&quot;&gt;&lt;/efx-grid&gt;
</code></pre>
<pre><code class="language-javascript">await (await import(&quot;./theme-loader.js&quot;)).default; // This line is only required for demo purpose. It is not relevant for using EFX Grid in your application.

/* ---------------------------------- Note ----------------------------------
  DataGenerator, Formatters and extensions are exposed to global scope
  in the bundle file to make it easier to create live examples.
  Importing formatters and extensions is still required in your application. 
  Please see the document for further information.
---------------------------------------------------------------------------*/
var columnFormattingExt = new ColumnFormatting();
var contextMenuExt = new ContextMenu();

var fields = [&quot;companyName&quot;, &quot;market&quot;, &quot;CF_LAST&quot;, &quot;CF_NETCHNG&quot;, &quot;CF_VOLUME&quot;, &quot;TR.IPODate&quot;];
var records = DataGenerator.generateRecords(fields, { numRows: 10 });
var configObj = {
  columns: [
    {title: &quot;Company&quot;, field: fields[0]},
    {title: &quot;Market&quot;, field: fields[1], width: 100},
    {title: &quot;Last&quot;, field: fields[2], width: 80, alignment: &quot;right&quot;},
    {title: &quot;Net. Chng&quot;, field: fields[3], width: 80, alignment: &quot;right&quot;},
    {title: &quot;Volume&quot;, field: fields[4], alignment: &quot;right&quot;},
    {title: &quot;IPO date&quot;, field: fields[5], width: 100}
  ],
  dataModel: {
    data: records
  },
  contextMenu: {
    items: {
      MENU_1: {
        text: &#39;Format&#39;,
        callback: function (e) {
          var lang = document.getElementById(&quot;lang_selector&quot;).value;
          columnFormattingExt.openDialog(e.colIndex, {
            lang: lang
          });
        }
      }
    },
    onMenu: function (e) {
      e.menu.addItem(&#39;MENU_1&#39;);
    }
  },
  extensions: [
    columnFormattingExt,
    contextMenuExt
  ]
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;
</code></pre>
</code-sandbox><blockquote>
<p>For more information about the extension see the <a href="./extensions/tr-grid-column-formatting">Column Formatting Extension</a> page.</p>
</blockquote>
<h2 id="setup-guide">Setup guide</h2>
<p>First, let&#39;s import the modules.</p>
<pre><code class="language-js">// efx-grid
import &#39;@refinitiv-ui/efx-grid&#39;;
import &#39;@refinitiv-ui/efx-grid/themes/halo/light&#39;;

// extensions
import {
  ConditionalColoring,
  HeatMap,
  TextFormatting,
  ColumnFormatting
 } from &#39;@refinitiv-ui/efx-grid/extensions&#39;;

// Column Formatting Dialog module
import &#39;@refinitiv-ui/efx-grid/column-format-dialog&#39;;
import &#39;@refinitiv-ui/efx-grid/column-format-dialog/themes/halo/light&#39;;
</code></pre>
<p>Create a new Column Formatting Extension instance and push it to an <code>extensions</code> configuration.</p>
<pre><code class="language-js">var cfe = new ColumnFormatting();

var configObj = {
  extensions: [
    cfe,
    new TextFormatting(),
    new HeatMap(),
    new ConditionalColoring()
  ],
  columns: columns, // Columns config
  dataModel: { // Data config
    fields: fields,
    data: dataRows
  },
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;
</code></pre>
<p>To open the dialog, you need to call <code>openDialog()</code> method on the extension object.</p>
<pre><code class="language-js">cfe.openDialog(0); // Change &quot;0&quot; to any column index.

// Or open the dialog with specific configuration.
cfe.openDialog(0, {
  supportDisplayStyleOptions: {
    fx: true,
  },
  supportValueFormatOptions: {
    fx: true
  }
  supportHighlightApplyToSwitch: true,
  data: {
    &#39;fieldList&#39;: [{&#39;value&#39;: &#39;col1&#39;}, {&#39;value&#39;: &#39;col2&#39;}, {&#39;value&#39;: &#39;col3&#39;}, {&#39;value&#39;: &#39;col4&#39;}, {&#39;value&#39;: &#39;col5&#39;}],
    &#39;valueFormatTab&#39;: {&#39;formatType&#39;: &#39;general&#39;},
    &#39;colorTextTab&#39;: {&#39;colorText&#39;: {&#39;field&#39;: &#39;col2&#39;}},
    &#39;displayStyleTab&#39;: {&#39;general&#39;: {&#39;alignment&#39;: &#39;center&#39;}, &#39;mode&#39;: &#39;general&#39;},
    &#39;fieldDataType&#39;: &#39;general&#39;
  },
  fields: [&quot;intCol&quot;, &quot;strCol&quot;, &quot;boolCol&quot;, &quot;floatCol&quot;, &quot;dateCol&quot;],
});
</code></pre>
<h2 id="changing-language">Changing Language</h2>
<p>For more information about internationalization and how is it applied in different contexts see <a href="./widgets/language-support">Language Support</a>.</p>
<h2 id="using-with-context-menu-extension">Using with <a href="./extensions/tr-grid-contextmenu">Context Menu Extension</a></h2>
<p>For most cases, you will want the dialog button to appear when the user right-clicks on the column header (known as the context menu).</p>
<p>To do this, simply import <code>Context Menu</code> extension and its configurations.</p>
<pre><code class="language-js">import {
  ContextMenu,
  ColumnFormatting,
  TextFormatting,
  HeatMap,
  ConditionalColoring
} from &#39;@refinitiv-ui/efx-grid/extensions&#39;;

var cfe = new ColumnFormatting();

var configObj = {
  extensions: [
    cfe,
    new ContextMenu(),
    new TextFormatting(),
    new HeatMap(),
    new ConditionalColoring()
  ],
  columns: columns, // Columns config
  dataModel: { // Data config
    fields: fields,
    data: dataRows
  },
  contextMenu: {
    items: {
      MENU_1: {
        text: &quot;Format&quot;,
        callback: function (e) {
          // Open the dialog when click on the &quot;Format&quot; menu
          cfe.openDialog(e.colIndex);
        }
      },
    },
    onMenu: function (e) {
      e.menu.addItem(&quot;MENU_1&quot;);
    }
  },
};
</code></pre>
<p>And that&#39;s it!</p>
<div></div>

<h2 style="margin-bottom:5px" id="api-refs">API Reference</h2>
<div id="elf-api-container"><div id="main-template" class="elf-template">    <section><article>                                                <h3 class="subsection-title" id="type_definitions">Type Definitions</h3>                        <div class="item">            <div class="item-type">typedef</div>    <h4 class="name" id="~Config">Config</h4>    <h5>Type:</h5>    <span class="param-type">Object</span>    <h5>Properties:</h5>    <div class="props"><table>    <thead>    <tr>                <th>Name</th>                <th>Type</th>                <th>Attributes</th>                        <th class="last">Description</th>    </tr>    </thead>    <tbody>            <tr>                            <td class="name"><code>data</code></td>                        <td class="type">                            <span class="param-type">Object</span>                        </td>                            <td class="attributes">                                                </td>                                    <td class="description last">Context object indicating current states of the column</td>        </tr>            <tr>                            <td class="name"><code>supportHighlightApplyToSwitch</code></td>                        <td class="type">                            <span class="param-type">boolean</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">support HighlightApplyToSwitch</td>        </tr>            <tr>                            <td class="name"><code>supportValueFormatOptions</code></td>                        <td class="type">                            <span class="param-type"><a href="#~SupportValueFormatOptions">ColumnFormatDialog~SupportValueFormatOptions</a></span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Support FxFormat</td>        </tr>            <tr>                            <td class="name"><code>supportDisplayStyleOptions</code></td>                        <td class="type">                            <span class="param-type"><a href="#~SupportDisplayStyleOptions">ColumnFormatDialog~SupportDisplayStyleOptions</a></span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Support items in "Display Style" dropdown</td>        </tr>            <tr>                            <td class="name"><code>fields</code></td>                        <td class="type">                            <span class="param-type">Array.&lt;string&gt;</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">List of available fields to be shown in the dialog</td>        </tr>            <tr>                            <td class="name"><code>confirm</code></td>                        <td class="type">                            <span class="param-type">function</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Confirm event callback</td>        </tr>            <tr>                            <td class="name"><code>cancel</code></td>                        <td class="type">                            <span class="param-type">function</span>                        </td>                            <td class="attributes">                                    &lt;optional&gt;<br>                                                </td>                                    <td class="description last">Cancel event callback</td>        </tr>        </tbody></table></div><div class="details">                                                            </div></div>                            <div class="item">            <div class="item-type">typedef</div>    <h4 class="name" id="~SupportDisplayStyleOptions">SupportDisplayStyleOptions</h4>    <h5>Type:</h5>    <span class="param-type">Object</span>    <h5>Properties:</h5>    <div class="props"><table>    <thead>    <tr>                <th>Name</th>                <th>Type</th>                        <th class="last">Description</th>    </tr>    </thead>    <tbody>            <tr>                            <td class="name"><code>bar</code></td>                        <td class="type">                            <span class="param-type">boolean</span>                        </td>                                    <td class="description last">support "bar"</td>        </tr>        </tbody></table></div><div class="details">                                                            </div></div>                            <div class="item">            <div class="item-type">typedef</div>    <h4 class="name" id="~SupportValueFormatOptions">SupportValueFormatOptions</h4>    <h5>Type:</h5>    <span class="param-type">Object</span>    <h5>Properties:</h5>    <div class="props"><table>    <thead>    <tr>                <th>Name</th>                <th>Type</th>                        <th class="last">Description</th>    </tr>    </thead>    <tbody>            <tr>                            <td class="name"><code>fx</code></td>                        <td class="type">                            <span class="param-type">boolean</span>                        </td>                                    <td class="description last">support "fx"</td>        </tr>        </tbody></table></div><div class="details">                                                            </div></div>                            <h3 class="subsection-title" id="methods">Methods</h3>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="hide"><span class="type-signature"></span>hide<span class="signature">()</span><span class="type-signature"></span></h4>                            <div class="description">        Hide the dialog    </div>                        <div class="details">                                                            </div>                                    </div>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="init"><span class="type-signature"></span>init<span class="signature">(userConfig<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>                                                <h5>Parameters:</h5>        <div class="params">        <div class="param">                            <div class="name">userConfig</div>                        <div class="type">                            <span class="param-type"><a href="#~Config">ColumnFormatDialog~Config</a></span>                        </div>                            <div class="attributes">                                    &lt;optional&gt;                                                                </div>                                                    <div class="description">                    Configuration object used to initialize dialog and populate data                </div>                    </div>            </div>        <div class="details">                                                            </div>                                    </div>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="show"><span class="type-signature"></span>show<span class="signature">()</span><span class="type-signature"></span></h4>                            <div class="description">        Show the dialog    </div>                        <div class="details">                                                            </div>                                    </div>                    <div class="item">                                <div class="item-type">function</div>                        <h4 class="name" id="updateDataWithAutosuggest"><span class="type-signature"></span>updateDataWithAutosuggest<span class="signature">(selectedItem, autoSuggest)</span><span class="type-signature"></span></h4>                                                <h5>Parameters:</h5>        <div class="params">        <div class="param">                            <div class="name">selectedItem</div>                        <div class="type">                            <span class="param-type">Object</span>                        </div>                                                    <div class="description">                    autosuggest selection                </div>                    </div>                <div class="param">                            <div class="name">autoSuggest</div>                        <div class="type">                            <span class="param-type">Object</span>                        </div>                                                    <div class="description">                    source autosuggest element                </div>                    </div>            </div>        <div class="details">                                                            </div>                                    </div>                </article></section></div></div>